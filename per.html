<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Misha • Pure Silver Jewelry</title>
  <meta name="description" content="Handcrafted 925 Sterling Silver Jewelry by Misha. Ethically made in India. Free shipping on prepaid orders.">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#1c214c;
      --white:#fff;
      --text:var(--primary);
      --light: rgba(28,33,76,0.03);
      --border: rgba(28,33,76,0.15);
      --shadow: rgba(28,33,76,0.08);
      --accent: rgba(255,255,255,0.95);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Montserrat',sans-serif;
      color:var(--text);
      background:var(--white);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.6;
    }
    a{cursor:pointer}

    /* HEADER */
    header{
      position:sticky;top:0;z-index:120;background:var(--primary);box-shadow:0 2px 10px var(--shadow);
      border-bottom:1px solid rgba(255,255,255,0.06);
    }
    .container{max-width:1280px;margin:0 auto;padding:0 1.5rem}
    .header-content{
      display:flex;align-items:center;gap:1rem;justify-content:space-between;padding:0.9rem 0;
    }

    /* hamburger menu */
    .hamburger {
      width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:8px;
      background:transparent;border:2px solid transparent;color:var(--white);cursor:pointer;flex-shrink:0;
      transition:all .22s ease;
    }
    .hamburger:hover{background:rgba(255,255,255,0.06)}
    .hamburger i{font-size:18px}

    /* logo: bigger, highlighted */
    .logo{
      display:flex;align-items:center;gap:1rem;text-decoration:none;color:var(--white);flex-shrink:0;
      margin-left:0;
    }
    .logo img{
      display:block;height:72px;max-width:260px;object-fit:contain;border-radius:8px;
      box-shadow:0 8px 30px rgba(28,33,76,0.18), 0 0 22px rgba(255,255,255,0.04) inset;
      transition:transform .18s ease;
      border:2px solid rgba(255,255,255,0.06);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      padding:6px;
    }
    .logo img:hover{transform:translateY(-3px) scale(1.02)}
    /* center area (search) */
    .header-center{
      flex:1;display:flex;align-items:center;justify-content:center;gap:1rem;
    }

    /* search collapsed/expand */
    .search-bar{
      position:relative;display:flex;align-items:center;justify-content:flex-end;
      transition:all .25s ease;/* width controlled by JS via a class */
    }
    .search-bar .search-toggle{
      width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;
      background:transparent;border:2px solid rgba(255,255,255,0.06);color:var(--white);cursor:pointer;
      transition:all .18s ease;margin-right:6px;flex-shrink:0;
    }
    .search-bar .search-toggle:hover{background:rgba(255,255,255,0.06)}
    .search-bar input{
      width:420px;max-width:60vw;padding:0.6rem 1rem;border-radius:999px;border:2px solid rgba(255,255,255,0.12);
      background:rgba(255,255,255,0.95);color:var(--primary);font-size:0.95rem;box-shadow:0 6px 20px rgba(28,33,76,0.06);
      transition:all .28s cubic-bezier(.2,.9,.2,1);
      opacity:1;height:44px;
    }
    .search-bar.collapsed input{
      width:0;padding:0;border-width:0;opacity:0;height:0;overflow:hidden;
    }
    .search-bar.collapsed{max-width:44px}

    /* header nav icons (wishlist & cart) */
    .header-icons{display:flex;align-items:center;gap:0.8rem;flex-shrink:0}
    .icon-btn{
      width:48px;height:48px;border-radius:10px;background:transparent;border:2px solid transparent;color:var(--white);
      display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;position:relative;
      transition:all .16s ease;
    }
    .icon-btn:hover{background:rgba(255,255,255,0.06)}
    .badge{
      position:absolute;top:-6px;right:-6px;background:var(--white);color:var(--primary);width:20px;height:20px;border-radius:50%;
      display:flex;align-items:center;justify-content:center;font-weight:700;font-size:11px;border:2px solid rgba(255,255,255,0.12)
    }

    /* BANNER - full width */
    .banner-wrap{
      width:100vw;position:relative;left:50%;transform:translateX(-50%); /* full-bleed centered */
      margin-bottom:2.5rem;
      box-shadow:none;
    }
    .banner-carousel{
      width:100%;max-width:none;margin:0;overflow:hidden;position:relative;background:transparent;
    }
    .banner-slides{display:flex;transition:transform .55s ease-in-out;will-change:transform}
    .banner-slide{min-width:100%;position:relative}
    .banner-slide img{width:100%;height:520px;object-fit:cover;display:block}
    @media (max-width:900px){ .banner-slide img{height:360px} }

    .banner-content{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:var(--white);text-align:center;width:90%;max-width:640px}
    .banner-content h2{font-family:'Cormorant Garamond',serif;font-size:2.8rem;margin-bottom:0.4rem}
    .banner-content p{font-size:1.05rem;margin-bottom:1.2rem}
    .banner-arrow{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.18);color:var(--primary);width:46px;height:46px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;z-index:20}
    .banner-arrow.left{left:18px}
    .banner-arrow.right{right:18px}
    .banner-dots{position:absolute;bottom:18px;left:50%;transform:translateX(-50%);display:flex;gap:10px;z-index:30}
    .banner-dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,0.45);cursor:pointer;border:2px solid transparent}
    .banner-dot.active{background:var(--white);transform:scale(1.15);border-color:var(--primary)}

    /* SECTION HEADERS */
    .section-header{padding:0 1.5rem;text-align:center;margin:1.5rem 0 1rem}
    .section-title{font-family:'Cormorant Garamond',serif;color:var(--primary);font-size:2.2rem}

    /* HORIZONTAL SCROLL GALLERY (categories & featured) */
    .scroll-row-wrap{position:relative;padding:0 1.5rem;margin-bottom:2.2rem}
    .scroll-row{
      display:flex;gap:1.1rem;overflow-x:auto;padding:1rem 0;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;
    }
    .scroll-row::-webkit-scrollbar{height:10px}
    .scroll-row::-webkit-scrollbar-thumb{background:var(--border);border-radius:999px}
    .category-card{
      min-width:180px;max-width:220px;flex:0 0 auto;scroll-snap-align:center;background:var(--white);border-radius:12px;padding:1.1rem;
      text-align:center;border:1px solid var(--border);box-shadow:0 6px 16px rgba(28,33,76,0.04);transition:transform .18s ease;
    }
    .category-card:hover{transform:translateY(-6px);border-color:var(--primary)}
    .category-card img{width:76px;height:76px;border-radius:50%;object-fit:cover;border:3px solid var(--light);margin-bottom:.6rem}

    .product-card{min-width:220px;max-width:260px;flex:0 0 auto;scroll-snap-align:center;border-radius:10px;background:var(--white);border:1px solid var(--border);overflow:hidden;cursor:pointer}
    .product-img{height:180px;background:var(--light);display:flex;align-items:center;justify-content:center}
    .product-img img{max-width:80%;max-height:80%;object-fit:contain}
    .product-info{padding:0.8rem;text-align:center}
    .product-info h3{font-size:1rem;color:var(--primary);margin-bottom:.25rem}
    .product-info p{font-size:.8rem;color:rgba(28,33,76,0.6)}
    .product-actions{display:flex;gap:0.6rem;align-items:center;justify-content:center;padding:0.8rem}
    .product-actions .wishlist-btn{width:40px;height:40px;border-radius:8px;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;background:transparent;color:var(--primary)}
    .product-actions .wishlist-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}

    /* scroll controls (arrows) for galleries */
    .scroll-arrow{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:10px;background:rgba(28,33,76,0.06);display:flex;align-items:center;justify-content:center;border:none;cursor:pointer;z-index:12}
    .scroll-arrow.left{left:6px}
    .scroll-arrow.right{right:6px}

    /* rest of page layout */
    main.container{max-width:1180px;margin:0 auto;padding:0 1.5rem}
    .products-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-top:1rem}
    footer{background:var(--primary);color:var(--white);padding:3rem 0;margin-top:3rem}

    /* small devices */
    @media (max-width:900px){
      .header-content{padding:.6rem 0}
      .logo img{height:56px;max-width:180px}
      .search-bar input{width:240px}
      .product-img{height:140px}
      .category-card{min-width:160px}
    }
    @media (max-width:520px){
      .header-content{gap:6px}
      .header-center{display:none}
      .banner-content h2{font-size:1.6rem}
      .banner-slide img{height:320px}
      .logo img{height:48px;max-width:150px}
    }
  </style>
</head>
<body>
  <!-- header -->
  <header>
    <div class="container">
      <div class="header-content">
        <!-- hamburger / category menu -->
        <button class="hamburger" id="hamburgerBtn" aria-label="Open categories">
          <i class="fas fa-bars"></i>
        </button>

        <!-- logo -->
        <a class="logo" onclick="app.showHome()" title="Misha">
          <img id="siteLogo" src="https://res.cloudinary.com/dsm5crlf1/image/upload/v1763133630/Maisha_Jewellery_Logo_2_ph7wqa.png" alt="Misha Jewellery">
        </a>

        <!-- center area: search (collapsible) -->
        <div class="header-center">
          <div class="search-bar collapsed" id="searchBar">
            <button class="search-toggle" id="searchToggle" aria-label="Search">
              <i class="fas fa-search"></i>
            </button>
            <input id="searchInput" type="text" placeholder="Search for jewelry..." aria-label="Search input">
          </div>
        </div>

        <!-- header icons: wishlist + cart -->
        <div class="header-icons">
          <button class="icon-btn" id="wishlistIcon" title="Wishlist (click)">
            <i class="fas fa-heart"></i>
            <div class="badge" id="wishlistBadge">0</div>
          </button>

          <div class="icon-btn" id="cartIcon" title="Cart">
            <i class="fas fa-shopping-cart"></i>
            <div class="badge" id="cartCount">0</div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- categories drawer (hidden by default) -->
  <div id="categoryDrawer" style="position:fixed;left:-320px;top:0;height:100vh;width:320px;background:var(--white);box-shadow:4px 0 26px rgba(0,0,0,0.12);z-index:200;transition:left .28s ease;padding:1.2rem;overflow-y:auto">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem">
      <h3 style="color:var(--primary);font-family:'Cormorant Garamond',serif">Categories</h3>
      <button onclick="toggleCategoryDrawer()" style="border:none;background:transparent;font-size:20px;color:var(--primary);cursor:pointer">&times;</button>
    </div>
    <div id="drawerCategories"></div>
  </div>

  <!-- BANNER (full width) -->
  <div class="banner-wrap" id="bannerWrap">
    <div class="banner-carousel">
      <div class="banner-slides" id="bannerSlides">
        <div class="banner-slide">
          <img src="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?auto=format&fit=crop&w=1800&q=80" alt="Banner 1">
          <div class="banner-content">
            <h2>New Collection 2024</h2>
            <p>Discover our latest handcrafted jewelry designs</p>
            <button class="btn" onclick="app.showCategory('necklaces')">Shop Now</button>
          </div>
        </div>
        <div class="banner-slide">
          <img src="https://images.unsplash.com/photo-1601121141461-9d6647bca1ed?auto=format&fit=crop&w=1800&q=80" alt="Banner 2">
          <div class="banner-content">
            <h2>Festive Special</h2>
            <p>Celebrate in style with our exclusive designs</p>
            <button class="btn" onclick="app.showCategory('earrings')">Explore Collection</button>
          </div>
        </div>
        <div class="banner-slide">
          <img src="https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?auto=format&fit=crop&w=1800&q=80" alt="Banner 3">
          <div class="banner-content">
            <h2>Handcrafted Excellence</h2>
            <p>925 Sterling Silver | Made in India</p>
            <button class="btn" onclick="app.showCategory('rings')">View Rings</button>
          </div>
        </div>
      </div>

      <button class="banner-arrow left" onclick="app.prevBanner()" aria-label="Previous banner"><i class="fas fa-chevron-left"></i></button>
      <button class="banner-arrow right" onclick="app.nextBanner()" aria-label="Next banner"><i class="fas fa-chevron-right"></i></button>
      <div class="banner-dots" id="bannerDots"></div>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <main class="container" id="mainContent">
    <!-- Categories section (gallery) -->
    <section class="scroll-row-wrap">
      <div class="section-header">
        <h2 class="section-title">Shop by Category</h2>
        <p class="section-subtitle">Discover our curated collections</p>
      </div>

      <div style="position:relative">
        <button class="scroll-arrow left" aria-label="scroll categories left" onclick="scrollRow('#categoriesRow', -340)"><i class="fas fa-chevron-left"></i></button>
        <div class="scroll-row" id="categoriesRow" tabindex="0" aria-label="Categories list"></div>
        <button class="scroll-arrow right" aria-label="scroll categories right" onclick="scrollRow('#categoriesRow', 340)"><i class="fas fa-chevron-right"></i></button>
      </div>
    </section>

    <!-- Featured products (gallery) -->
    <section class="scroll-row-wrap">
      <div class="section-header">
        <h2 class="section-title">Featured Products</h2>
        <p class="section-subtitle">Handpicked favorites just for you</p>
      </div>

      <div style="position:relative">
        <button class="scroll-arrow left" aria-label="scroll featured left" onclick="scrollRow('#featuredRow', -360)"><i class="fas fa-chevron-left"></i></button>
        <div class="scroll-row" id="featuredRow" tabindex="0" aria-label="Featured products"></div>
        <button class="scroll-arrow right" aria-label="scroll featured right" onclick="scrollRow('#featuredRow', 360)"><i class="fas fa-chevron-right"></i></button>
      </div>
    </section>

    <!-- other content placeholders kept (category page etc.) - original templates are preserved below -->
    <div id="categoryPage" class="hidden" style="display:none"></div>
    <div id="productDetailPage" class="hidden" style="display:none"></div>
    <div id="wishlistPage" class="hidden" style="display:none"></div>
  </main>

  <!-- minimal footer -->
  <footer>
    <div class="container" style="display:flex;gap:2rem;align-items:flex-start;flex-wrap:wrap">
      <div style="flex:1;min-width:220px">
        <h3 style="color:var(--accent)">About Misha</h3>
        <p style="color:rgba(255,255,255,0.9)">Handcrafted 925 Sterling Silver jewelry, ethically sourced and designed with love in India.</p>
      </div>
      <div style="min-width:220px">
        <h3 style="color:var(--accent)">Contact</h3>
        <p style="color:rgba(255,255,255,0.9);margin:0">Email: hello.mishajwellery@gmail.com</p>
        <p style="color:rgba(255,255,255,0.9);margin:0">WhatsApp: +91 77718 18695</p>
      </div>
    </div>
  </footer>

  <script>
    /********************
     * Keep your app object; we extend/modify rendering methods
     * and add UI wiring for new components (search collapse, gallery scroll, hamburger drawer)
     ********************/
    const app = {
      cart: JSON.parse(localStorage.getItem('cart')) || [],
      wishlist: JSON.parse(localStorage.getItem('wishlist')) || [],
      products: [],
      categories: [
        { id: 'rings', name: 'Rings', image: 'https://images.unsplash.com/photo-1605100804763-247f67b3557e?auto=format&fit=crop&w=500&q=80', description: 'Elegant rings for every occasion' },
        { id: 'necklaces', name: 'Necklaces', image: 'https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?auto=format&fit=crop&w=500&q=80', description: 'Beautiful necklaces and pendants' },
        { id: 'earrings', name: 'Earrings', image: 'https://images.unsplash.com/photo-1611591437281-460cc5f3e1c7?auto=format&fit=crop&w=500&q=80', description: 'Stunning earrings collection' },
        { id: 'bracelets', name: 'Bracelets', image: 'https://images.unsplash.com/photo-1618331835717-801e976710b8?auto=format&fit=crop&w=500&q=80', description: 'Charming bracelets and bangles' },
        { id: 'anklets', name: 'Anklets', image: 'https://images.unsplash.com/photo-1607082350899-7e105aa886ae?auto=format&fit=crop&w=500&q=80', description: 'Delicate anklets' }
      ],
      currentBannerIndex: 0,
      bannerInterval: null,
      totalBanners: 3,

      init() {
        this.products = this.getSampleProducts();
        this.renderCategories();
        this.renderDrawerCategories();
        this.renderFeaturedProducts();
        this.updateCartCount();
        this.updateWishlistCount();
        this.initBannerCarousel();
        this.setupSearchCollapse();
        this.setupHeaderButtons();
        this.setupKeyboardShortcuts();
      },

      /* SAMPLE PRODUCTS (kept from original) */
      getSampleProducts() {
        return [
          { id: 'ring-1', name: 'Diamond Solitaire Ring', category: 'rings', price: 5999, description: 'Elegant solitaire ring with cubic zirconia stone.', images: ['https://images.unsplash.com/photo-1605100804763-247f67b3557e?auto=format&fit=crop&w=600'] },
          { id: 'necklace-1', name: 'Heritage Necklace', category: 'necklaces', price: 4800, description: 'Timeless design with intricate detailing.', images: ['https://images.unsplash.com/photo-1599508080112-e8e3de2908c1?auto=format&fit=crop&w=600'] },
          { id: 'earring-1', name: 'Jhumka Earrings', category: 'earrings', price: 1950, description: 'Traditional jhumkas with modern flair.', images: ['https://images.unsplash.com/photo-1618312900238-2f3a4e5e3e1d?auto=format&fit=crop&w=600'] },
          { id: 'bracelet-1', name: 'Temple Bracelet', category: 'bracelets', price: 3200, description: 'Inspired by South Indian temple architecture.', images: ['https://images.unsplash.com/photo-1580805026712-2920a23d2e33?auto=format&fit=crop&w=600'] },
          { id: 'anklet-1', name: 'Lotus Anklet', category: 'anklets', price: 2450, description: 'Handcrafted with delicate lotus motifs.', images: ['https://images.unsplash.com/photo-1607082350899-7e105aa886ae?auto=format&fit=crop&w=600'] },
          { id: 'ring-2', name: 'Floral Band Ring', category: 'rings', price: 3499, description: 'Delicate floral pattern band ring.', images: ['https://images.unsplash.com/photo-1605100804763-247f67b3557e?auto=format&fit=crop&w=600'] },
          { id: 'necklace-2', name: 'Pearl Pendant', category: 'necklaces', price: 2999, description: 'Elegant pearl pendant on sterling silver chain.', images: ['https://images.unsplash.com/photo-1599508080112-e8e3de2908c1?auto=format&fit=crop&w=600'] }
        ];
      },

      /* RENDER categories as horizontal gallery */
      renderCategories() {
        const row = document.getElementById('categoriesRow');
        if (!row) return;
        row.innerHTML = this.categories.map(c => `
          <div class="category-card" onclick="app.showCategory('${c.id}')">
            <img src="${c.image}" alt="${c.name}">
            <h3>${c.name}</h3>
            <p style="font-size:.82rem;color:rgba(28,33,76,0.6)">${c.description}</p>
          </div>
        `).join('');
      },

      /* also render drawer list */
      renderDrawerCategories() {
        const el = document.getElementById('drawerCategories');
        if (!el) return;
        el.innerHTML = this.categories.map(c => `
          <div style="padding:.6rem .4rem;border-radius:8px;margin-bottom:.6rem;display:flex;align-items:center;gap:.6rem;cursor:pointer;border:1px solid var(--border)" onclick="app.showCategory('${c.id}'); toggleCategoryDrawer();">
            <img src="${c.image}" style="width:46px;height:46px;border-radius:8px;object-fit:cover;border:2px solid var(--light)">
            <div>
              <strong style="color:var(--primary);display:block">${c.name}</strong>
              <small style="color:rgba(0,0,0,0.6)">${c.description}</small>
            </div>
          </div>
        `).join('');
      },

      /* FEATURED PRODUCTS row */
      renderFeaturedProducts() {
        const row = document.getElementById('featuredRow');
        if (!row) return;
        const featured = this.products.slice(0,7);
        row.innerHTML = featured.map(p => `
          <div class="product-card" onclick="app.showProductDetail('${p.id}')">
            <div class="product-img"><img src="${p.images[0]}" alt="${p.name}"></div>
            <div class="product-info">
              <h3>${p.name}</h3>
              <p>${p.description.substring(0,60)}${p.description.length>60?'...':''}</p>
              <div style="margin-top:.5rem;font-weight:700;color:var(--primary)">₹${p.price.toLocaleString()}</div>
            </div>
            <div class="product-actions">
              <button class="wishlist-btn ${this.wishlist.some(w=>w.id===p.id)?'active':''}" onclick="event.stopPropagation(); app.toggleWishlist('${p.id}')">
                <i class="fas fa-heart"></i>
              </button>
              <button style="border-radius:8px;padding:.5rem .6rem;border:1px solid var(--border);background:transparent" onclick="event.stopPropagation(); app.addToCart('${p.id}')">
                <i class="fas fa-cart-plus"></i>
              </button>
            </div>
          </div>
        `).join('');
      },

      /* basic wishlist toggling (keeps your original logic) */
      toggleWishlist(productId) {
        const product = this.products.find(p => p.id === productId);
        if (!product) return;
        const idx = this.wishlist.findIndex(w=>w.id===productId);
        if (idx!==-1) this.wishlist.splice(idx,1);
        else this.wishlist.push({ id:product.id, name:product.name, price:product.price, image:product.images[0] });
        localStorage.setItem('wishlist', JSON.stringify(this.wishlist));
        this.updateWishlistCount();
        // update UI buttons (row)
        document.querySelectorAll(`button[onclick*="toggleWishlist('${productId}')"]`).forEach(b=>{
          b.classList.toggle('active', this.wishlist.some(w=>w.id===productId));
        });
        // badge in header
        document.getElementById('wishlistBadge').textContent = this.wishlist.length;
      },

      updateWishlistCount() {
        document.getElementById('wishlistBadge').textContent = this.wishlist.length;
      },

      addToCart(productId){
        const p = this.products.find(x=>x.id===productId); if(!p) return;
        const existing = this.cart.find(c=>c.id===productId);
        if(existing) existing.quantity++;
        else this.cart.push({ id:p.id,name:p.name,price:p.price,image:p.images[0],quantity:1 });
        localStorage.setItem('cart', JSON.stringify(this.cart));
        this.updateCartCount();
        // show small animation
        const c = document.getElementById('cartIcon');
        c.animate([{ transform:'scale(1.12)'},{ transform:'scale(1)'}],{duration:250,iterations:1});
      },

      updateCartCount(){ document.getElementById('cartCount').textContent = this.cart.reduce((s,i)=>s+(i.quantity||1),0) },

      /* Product detail stub */
      showProductDetail(productId){
        // keep your original showProductDetail if needed; here we just use placeholder
        alert('Open product detail: '+productId);
      },

      showCategory(categoryId){
        const cat = this.categories.find(c=>c.id===categoryId);
        if(!cat) return;
        // navigate to category / reuse existing category page in your app
        alert('Open category: '+cat.name);
      },

      /* BANNER carousel */
      initBannerCarousel(){
        this.updateBannerPosition();
        this.startBannerAutoPlay();
        // create dots
        const dots = document.getElementById('bannerDots'); dots.innerHTML='';
        for(let i=0;i<this.totalBanners;i++){
          const d=document.createElement('div');d.className='banner-dot'+(i===0?' active':'');d.onclick=()=>this.goToBanner(i);
          dots.appendChild(d);
        }
      },
      goToBanner(i){ this.currentBannerIndex = i; this.updateBannerPosition(); this.restartBanner(); },
      nextBanner(){ this.currentBannerIndex = (this.currentBannerIndex+1)%this.totalBanners; this.updateBannerPosition(); },
      prevBanner(){ this.currentBannerIndex = (this.currentBannerIndex-1+this.totalBanners)%this.totalBanners; this.updateBannerPosition(); },
      updateBannerPosition(){ const slides = document.getElementById('bannerSlides'); slides.style.transform = `translateX(-${this.currentBannerIndex*100}%)`; document.querySelectorAll('.banner-dot').forEach((d,idx)=>d.classList.toggle('active',idx===this.currentBannerIndex)); },
      startBannerAutoPlay(){ this.stopBannerAutoPlay(); this.bannerInterval = setInterval(()=>this.nextBanner(),5500); },
      stopBannerAutoPlay(){ if(this.bannerInterval){ clearInterval(this.bannerInterval); this.bannerInterval=null } },
      restartBanner(){ this.stopBannerAutoPlay(); this.startBannerAutoPlay(); },

      /* Search collapse/expand */
      setupSearchCollapse(){
        const bar = document.getElementById('searchBar');
        const toggle = document.getElementById('searchToggle');
        const input = document.getElementById('searchInput');

        function expand(){
          bar.classList.remove('collapsed');
          input.focus();
        }
        function collapse(){
          bar.classList.add('collapsed');
          input.value = '';
        }

        toggle.addEventListener('click', (e)=>{
          e.stopPropagation();
          if(bar.classList.contains('collapsed')) expand();
          else collapse();
        });

        // click outside to collapse
        document.addEventListener('click', (e)=>{
          if(!bar.contains(e.target)) bar.classList.add('collapsed');
        });
        // ESC to collapse
        document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') bar.classList.add('collapsed'); });
      },

      /* header wiring */
      setupHeaderButtons(){
        document.getElementById('wishlistIcon').addEventListener('click', (e)=>{ e.stopPropagation(); this.showWishlist(); });
        document.getElementById('cartIcon').addEventListener('click', (e)=>{ e.stopPropagation(); alert('Open cart (you have '+this.cart.length+' items)'); });
        // hamburger
        document.getElementById('hamburgerBtn').addEventListener('click', ()=>toggleCategoryDrawer());
      },

      showWishlist(){
        // show wishlist page logic (adapted to your original app.showWishlist)
        const wl = this.wishlist;
        if(wl.length===0) alert('Your wishlist is empty');
        else {
          // display a basic list
          const names = wl.map(w=>w.name).join('\n• ');
          alert('Wishlist:\n• ' + names);
        }
      },

      /* small accessibility */
      setupKeyboardShortcuts(){
        document.addEventListener('keydown', (e)=>{
          // press / to focus search
          if(e.key === '/') { e.preventDefault(); const s=document.getElementById('searchBar'); s.classList.remove('collapsed'); document.getElementById('searchInput').focus(); }
        });
      }
    };

    /* helper: scroll a row by pixels */
    function scrollRow(selector, amount){
      const el = document.querySelector(selector);
      if(!el) return;
      el.scrollBy({ left: amount, behavior: 'smooth' });
    }

    /* category drawer toggle */
    function toggleCategoryDrawer(){
      const d = document.getElementById('categoryDrawer');
      if(d.style.left === '0px'){ d.style.left = '-320px'; }
      else { d.style.left = '0px'; }
    }

    /* init */
    document.addEventListener('DOMContentLoaded', ()=>{
      app.init();

      // sync header badges from stored state
      document.getElementById('wishlistBadge').textContent = app.wishlist.length;
      document.getElementById('cartCount').textContent = app.cart.reduce((s,i)=>s+(i.quantity||1),0);
    });
  </script>
</body>
</html>
